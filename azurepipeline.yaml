steps:
  - task: Lambdatest.lambda-azure-pipeline-extention.configuration-task.configuration@1
    displayName: LambdaTest configuration setup
    inputs:
      connection: Extent
  - script: >
      wget https://downloads.lambdatest.com/hyperexecute/darwin/hyperexecute

      chmod +x hyperexecute


      # Extract the appropriate architecture from the universal binary

      lipo hyperexecute -thin "$(arch)" -output hyperexecute_arch

      chmod +x hyperexecute_arch


      # Run the extracted binary

      ./hyperexecute_arch --user anubhas --key JvGShZ2Bm8RdgmGFbbx4ZtbOb6DeQ8nqSvtHDZdDY7PzqaZMTq --config matrix.yaml --verbose
    displayName: Download and Run hyperexecute
